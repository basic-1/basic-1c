INI,__LIB_ST7565_SPI_DC_PIN
INI,__LIB_ST7565_SPI_DC_PORT

; set DC pin low
:__LIB_ST7565_SPI_DC_LO
IOCTL,"SPI"<STRING>,"WAIT"<STRING>,"NOTBSY"<STRING>

ASM
; *ptr = *ptr & !(pin_mask)
LD A, (__LIB_ST7565_SPI_DC_PIN)
CPL A
AND A, [__LIB_ST7565_SPI_DC_PORT]
LD [__LIB_ST7565_SPI_DC_PORT], A
RET
ENDASM